import React from "react";
import {
  useCurrentFrame,
  useVideoConfig,
  interpolate,
  spring,
  Img,
  Easing,
} from "remotion";
import { TextAnimation } from "../../library/components/text/TextAnimation";
import { Glow } from "../../library/components/effects/Glow";
import { loadFont } from "@remotion/google-fonts/Inter";

const { fontFamily: interFont } = loadFont("normal", {
  weights: ["400", "600", "700", "800"],
  subsets: ["latin"],
});

const LOGO_SVG = `data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20112%2032%22%3E%3Cpath%20d%3D%22M%2011.625%2013.813%20C%2011.625%2011.638%2013.388%209.875%2015.563%209.875%20C%2017.738%209.875%2019.501%2011.638%2019.501%2013.813%20C%2019.501%2015.988%2017.738%2017.751%2015.563%2017.751%20C%2013.388%2017.751%2011.625%2015.988%2011.625%2013.813%20Z%22%20fill%3D%22rgb(229%2C229%2C229)%22%3E%3C%2Fpath%3E%3Cg%20transform%3D%22translate(2.778%202.033)%22%3E%3Cpath%20d%3D%22M%2026.444%2014.745%20C%2026.444%2013.141%2026.159%2011.603%2025.635%2010.181%20C%2025.278%2014.372%2023.043%2016.525%2020.708%2015.522%20C%2018.521%2014.582%2019.995%2010.92%2020.104%209.172%20C%2020.287%206.21%2020.094%202.819%2014.714%200%20C%2016.949%204.277%2014.972%206.935%2012.898%207.097%20C%2010.598%207.277%208.491%205.12%209.268%201.62%20C%206.75%203.475%206.678%206.599%207.454%208.62%20C%208.264%2010.726%207.421%2012.476%205.445%2012.67%20C%203.236%2012.888%202.009%2010.305%203.14%206.19%20C%201.109%208.577%20-0.005%2011.611%200%2014.745%20C%200%2022.047%205.92%2027.967%2013.222%2027.967%20C%2020.525%2027.967%2026.444%2022.047%2026.444%2014.745%20Z%22%20fill%3D%22rgb(244%2C%20144%2C%2012)%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3Cpath%20d%3D%22M%2024.084%2020.666%20C%2024.199%2023.065%2022.092%2024.005%2020.958%2023.551%20C%2019.32%2022.895%2019.76%2021.769%2019.338%2019.436%20C%2018.916%2017.102%2017.296%2015.482%2014.898%2014.769%20C%2016.648%2019.695%2013.928%2021.509%2012.503%2021.834%20C%2011.047%2022.166%209.583%2021.834%209.417%2018.718%20C%207.654%2020.468%206.664%2022.849%206.667%2025.333%20C%206.667%2025.62%206.684%2025.901%206.709%2026.181%20C%209.18%2028.631%2012.52%2030.004%2016%2030%20C%2019.624%2030%2022.904%2028.54%2025.291%2026.181%20C%2025.316%2025.901%2025.334%2025.62%2025.334%2025.333%20C%2025.337%2023.694%2024.906%2022.084%2024.085%2020.666%20Z%22%20fill%3D%22rgb(255%2C%20204%2C%2077)%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22M%2049.634%2022.216%20C%2048.626%2022.216%2047.66%2022.084%2046.736%2021.82%20C%2045.812%2021.544%2045.068%2021.19%2044.504%2020.758%20L%2045.494%2018.562%20C%2046.034%2018.946%2046.67%2019.264%2047.402%2019.516%20C%2048.128%2019.753%2048.888%2019.875%2049.652%2019.876%20C%2050.228%2019.876%2050.69%2019.822%2051.038%2019.714%20C%2051.398%2019.594%2051.662%2019.432%2051.83%2019.228%20C%2051.998%2019.024%2052.082%2018.79%2052.082%2018.526%20C%2052.082%2018.19%2051.95%2017.926%2051.686%2017.734%20C%2051.422%2017.53%2051.074%2017.368%2050.642%2017.248%20C%2050.168%2017.105%2049.687%2016.985%2049.202%2016.888%20C%2048.674%2016.765%2048.152%2016.621%2047.636%2016.456%20C%2047.138%2016.296%2046.661%2016.079%2046.214%2015.808%20C%2045.784%2015.546%2045.421%2015.189%2045.152%2014.764%20C%2044.888%2014.332%2044.756%2013.78%2044.756%2013.108%20C%2044.756%2012.388%2044.948%2011.734%2045.332%2011.146%20C%2045.728%2010.546%2046.316%2010.072%2047.096%209.724%20C%2047.888%209.364%2048.878%209.184%2050.066%209.184%20C%2050.858%209.184%2051.638%209.28%2052.406%209.472%20C%2053.174%209.652%2053.852%209.928%2054.44%2010.3%20L%2053.54%2012.514%20C%2052.987%2012.192%2052.394%2011.944%2051.776%2011.776%20C%2051.215%2011.612%2050.633%2011.527%2050.048%2011.524%20C%2049.484%2011.524%2049.022%2011.59%2048.662%2011.722%20C%2048.302%2011.854%2048.044%2012.028%2047.888%2012.244%20C%2047.731%2012.451%2047.649%2012.704%2047.654%2012.964%20C%2047.654%2013.288%2047.786%2013.552%2048.05%2013.756%20C%2048.314%2013.948%2048.662%2014.104%2049.094%2014.224%20C%2049.526%2014.344%2050%2014.464%2050.516%2014.584%20C%2051.043%2014.704%2051.565%2014.842%2052.082%2014.998%20C%2052.587%2015.144%2053.072%2015.356%2053.522%2015.628%20C%2053.954%2015.892%2054.302%2016.24%2054.566%2016.672%20C%2054.842%2017.104%2054.98%2017.65%2054.98%2018.31%20C%2054.98%2019.018%2054.782%2019.666%2054.386%2020.254%20C%2053.99%2020.842%2053.396%2021.316%2052.604%2021.676%20C%2051.824%2022.036%2050.834%2022.216%2049.634%2022.216%20Z%20M%2060.861%2022.144%20C%2060.057%2022.144%2059.337%2021.988%2058.701%2021.676%20C%2058.078%2021.366%2057.568%2020.869%2057.242%2020.254%20C%2056.895%2019.606%2056.721%2018.784%2056.721%2017.788%20L%2056.721%2012.316%20L%2059.529%2012.316%20L%2059.529%2017.374%20C%2059.529%2018.178%2059.696%2018.772%2060.032%2019.156%20C%2060.381%2019.528%2060.867%2019.714%2061.491%2019.714%20C%2061.922%2019.714%2062.307%2019.624%2062.642%2019.444%20C%2062.978%2019.252%2063.242%2018.964%2063.434%2018.58%20C%2063.627%2018.184%2063.722%2017.692%2063.722%2017.104%20L%2063.722%2012.316%20L%2066.531%2012.316%20L%2066.531%2022%20L%2063.866%2022%20L%2063.866%2019.336%20L%2064.353%2020.11%20C%2064.049%2020.761%2063.544%2021.297%2062.913%2021.64%20C%2062.282%2021.978%2061.576%2022.151%2060.861%2022.144%20Z%20M%2074.856%2022.144%20C%2074.04%2022.144%2073.326%2021.964%2072.714%2021.604%20C%2072.102%2021.244%2071.622%2020.698%2071.274%2019.966%20C%2070.938%2019.222%2070.77%2018.286%2070.77%2017.158%20C%2070.77%2016.018%2070.932%2015.082%2071.256%2014.35%20C%2071.58%2013.618%2072.048%2013.072%2072.66%2012.712%20C%2073.272%2012.352%2074.004%2012.172%2074.856%2012.172%20C%2075.768%2012.172%2076.584%2012.382%2077.304%2012.802%20C%2078.031%2013.205%2078.629%2013.803%2079.032%2014.53%20C%2079.464%2015.274%2079.68%2016.15%2079.68%2017.158%20C%2079.68%2018.178%2079.464%2019.06%2079.032%2019.804%20C%2078.629%2020.531%2078.031%2021.129%2077.304%2021.532%20C%2076.584%2021.94%2075.768%2022.144%2074.856%2022.144%20Z%20M%2069.132%2025.492%20L%2069.132%2012.316%20L%2071.814%2012.316%20L%2071.814%2014.296%20L%2071.76%2017.176%20L%2071.94%2020.038%20L%2071.94%2025.492%20Z%20M%2074.37%2019.84%20C%2074.838%2019.84%2075.252%2019.732%2075.612%2019.516%20C%2075.984%2019.3%2076.278%2018.994%2076.494%2018.598%20C%2076.722%2018.19%2076.836%2017.71%2076.836%2017.158%20C%2076.836%2016.594%2076.722%2016.114%2076.494%2015.718%20C%2076.291%2015.336%2075.986%2015.018%2075.612%2014.8%20C%2075.236%2014.58%2074.806%2014.468%2074.37%2014.476%20C%2073.902%2014.476%2073.482%2014.584%2073.11%2014.8%20C%2072.736%2015.018%2072.431%2015.336%2072.228%2015.718%20C%2072.012%2016.114%2071.904%2016.594%2071.904%2017.158%20C%2071.904%2017.71%2072.012%2018.19%2072.228%2018.598%20C%2072.444%2018.994%2072.738%2019.3%2073.11%2019.516%20C%2073.482%2019.732%2073.902%2019.84%2074.37%2019.84%20Z%20M%2086.366%2022.144%20C%2085.262%2022.144%2084.29%2021.928%2083.45%2021.496%20C%2082.622%2021.064%2081.98%2020.476%2081.524%2019.732%20C%2081.068%2018.976%2080.84%2018.118%2080.84%2017.158%20C%2080.84%2016.186%2081.062%2015.328%2081.506%2014.584%20C%2081.952%2013.838%2082.593%2013.228%2083.36%2012.82%20C%2084.14%2012.388%2085.022%2012.172%2086.006%2012.172%20C%2086.954%2012.172%2087.806%2012.376%2088.562%2012.784%20C%2089.322%2013.172%2089.953%2013.773%2090.38%2014.512%20C%2090.824%2015.256%2091.046%2016.15%2091.046%2017.194%20C%2091.046%2017.302%2091.04%2017.428%2091.028%2017.572%20C%2091.017%2017.698%2091.005%2017.824%2090.992%2017.95%20L%2083.126%2017.95%20L%2083.126%2016.312%20L%2089.516%2016.312%20L%2088.436%2016.798%20C%2088.436%2016.294%2088.334%2015.856%2088.13%2015.484%20C%2087.936%2015.122%2087.642%2014.822%2087.284%2014.62%20C%2086.924%2014.404%2086.504%2014.296%2086.024%2014.296%20C%2085.544%2014.296%2085.118%2014.404%2084.746%2014.62%20C%2084.386%2014.824%2084.104%2015.118%2083.9%2015.502%20C%2083.696%2015.874%2083.594%2016.318%2083.594%2016.834%20L%2083.594%2017.266%20C%2083.594%2017.794%2083.708%2018.262%2083.936%2018.67%20C%2084.176%2019.066%2084.506%2019.372%2084.926%2019.588%20C%2085.358%2019.792%2085.862%2019.894%2086.438%2019.894%20C%2086.954%2019.894%2087.404%2019.816%2087.788%2019.66%20C%2088.184%2019.504%2088.544%2019.27%2088.868%2018.958%20L%2090.362%2020.578%20C%2089.903%2021.093%2089.329%2021.493%2088.688%2021.748%20C%2088.016%2022.012%2087.242%2022.144%2086.366%2022.144%20Z%20M%2092.916%2022%20L%2092.916%2012.316%20L%2095.597%2012.316%20L%2095.597%2015.052%20L%2095.219%2014.26%20C%2095.507%2013.576%2095.969%2013.06%2096.605%2012.712%20C%2097.241%2012.352%2098.015%2012.172%2098.927%2012.172%20L%2098.927%2014.764%20C%2098.819%2014.753%2098.711%2014.747%2098.603%2014.746%20C%2098.501%2014.734%2098.399%2014.728%2098.297%2014.728%20C%2097.529%2014.728%2096.905%2014.95%2096.425%2015.394%20C%2095.957%2015.826%2095.723%2016.504%2095.723%2017.428%20L%2095.723%2022%20L%2092.915%2022%20Z%20M%2098.74%2022%20L%20104.158%2014.53%20L%20104.158%2016.654%20L%2098.974%209.4%20L%20102.286%209.4%20L%20105.868%2014.458%20L%20104.482%2014.476%20L%20108.01%209.4%20L%20111.178%209.4%20L%20106.03%2016.528%20L%20106.03%2014.44%20L%20111.484%2022%20L%20108.118%2022%20L%20104.41%2016.654%20L%20105.742%2016.654%20L%20102.088%2022%20Z%22%20fill%3D%22rgb(255%2C255%2C255)%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E`;

export const ProductRevealScene: React.FC = () => {
  const frame = useCurrentFrame();
  const { fps } = useVideoConfig();

  // Logo entrance
  const logoScale = spring({
    frame,
    fps,
    config: { damping: 10, stiffness: 80 },
    delay: 5,
  });
  const logoOpacity = interpolate(frame, [5, 15], [0, 1], {
    extrapolateLeft: "clamp",
    extrapolateRight: "clamp",
  });

  // Glow pulse behind logo
  const glowIntensity = interpolate(frame, [15, 40], [0, 1], {
    extrapolateLeft: "clamp",
    extrapolateRight: "clamp",
  });

  // Tagline
  const taglineOpacity = interpolate(frame, [30, 42], [0, 1], {
    extrapolateLeft: "clamp",
    extrapolateRight: "clamp",
  });
  const taglineY = interpolate(frame, [30, 42], [30, 0], {
    extrapolateLeft: "clamp",
    extrapolateRight: "clamp",
    easing: Easing.out(Easing.cubic),
  });

  // "Meet SuperX" text
  const meetOpacity = interpolate(frame, [0, 10], [0, 1], {
    extrapolateLeft: "clamp",
    extrapolateRight: "clamp",
  });
  const meetY = interpolate(frame, [0, 10], [20, 0], {
    extrapolateLeft: "clamp",
    extrapolateRight: "clamp",
    easing: Easing.out(Easing.cubic),
  });

  // Feature pills
  const features = [
    "AI Writer",
    "Smart Analytics",
    "Content Studio",
    "Auto Scheduler",
  ];

  // Exit
  const exitOpacity = interpolate(frame, [115, 130], [1, 0], {
    extrapolateLeft: "clamp",
    extrapolateRight: "clamp",
  });

  return (
    <div
      style={{
        position: "absolute",
        inset: 0,
        display: "flex",
        flexDirection: "column",
        alignItems: "center",
        justifyContent: "center",
        fontFamily: interFont,
        opacity: exitOpacity,
      }}
    >
      {/* "Meet" subtitle */}
      <div
        style={{
          fontSize: 22,
          fontWeight: 600,
          color: "#FFC367",
          letterSpacing: 4,
          textTransform: "uppercase",
          opacity: meetOpacity,
          transform: `translateY(${meetY}px)`,
          marginBottom: 24,
        }}
      >
        Introducing
      </div>

      {/* Logo with glow */}
      <Glow
        color="#F4900C"
        intensity={40 * glowIntensity}
        pulsate
        pulseDuration={3}
        layers={3}
      >
        <Img
          src={LOGO_SVG}
          style={{
            width: 400,
            height: "auto",
            transform: `scale(${logoScale})`,
            opacity: logoOpacity,
          }}
        />
      </Glow>

      {/* Tagline */}
      <div
        style={{
          marginTop: 36,
          opacity: taglineOpacity,
          transform: `translateY(${taglineY}px)`,
        }}
      >
        <TextAnimation
          className="text-[28px] font-medium text-center"
          style={{
            fontFamily: interFont,
            color: "rgba(255,255,255,0.7)",
            maxWidth: 600,
          }}
          startFrom={30}
          createTimeline={({ textRef, tl, SplitText }) => {
            const split = new SplitText(textRef.current, { type: "words" });
            tl.fromTo(
              split.words,
              { opacity: 0, y: 15 },
              {
                opacity: 1,
                y: 0,
                duration: 0.5,
                stagger: 0.06,
                ease: "power3.out",
              },
            );
            return tl;
          }}
        >
          Grow faster on ùïè with hidden insights
        </TextAnimation>
      </div>

      {/* Feature pills */}
      <div style={{ display: "flex", gap: 16, marginTop: 48 }}>
        {features.map((feat, i) => {
          const pillDelay = 55 + i * 8;
          const pillScale = spring({
            frame,
            fps,
            config: { damping: 14, stiffness: 120 },
            delay: pillDelay,
          });
          const pillOpacity = interpolate(
            frame,
            [pillDelay, pillDelay + 10],
            [0, 1],
            { extrapolateLeft: "clamp", extrapolateRight: "clamp" },
          );
          return (
            <div
              key={feat}
              style={{
                padding: "10px 24px",
                borderRadius: 50,
                background: "rgba(255,195,103,0.1)",
                border: "1px solid rgba(255,195,103,0.25)",
                color: "#FFC367",
                fontSize: 16,
                fontWeight: 600,
                opacity: pillOpacity,
                transform: `scale(${pillScale})`,
              }}
            >
              {feat}
            </div>
          );
        })}
      </div>
    </div>
  );
};
